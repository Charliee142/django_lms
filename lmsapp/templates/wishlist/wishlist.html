{% extends 'base.html' %}
{% load static %}

{% block title %}{% endblock title %}
{% block content %}
{% load course_tags %}

<div class="container pb-4 pb-xl-7">
    <h1 class="mt-4">Your Wishlist</h1>
    <div class="row row-cols-md-2 row-cols-xl-3 mb-6 mb-xl-3">
        {% if wishlist_courses %}
        {% for i in wishlist_courses %}
        <div class="col-md pb-4 pb-md-7">
            <!-- Card -->
            <div class="card border shadow p-2 lift sk-fade">
                <!-- Image -->
                <div class="card-zoom position-relative">
                    <div class="badge-float sk-fade-top top-0 right-0 mt-4 me-4">
                        <a href="{% url 'course_details' i.course.slug %}" class="btn btn-xs btn-dark text-white rounded-circle lift opacity-dot-7 me-1 p-2 d-inline-flex justify-content-center align-items-center w-36 h-36">
                            <!-- Icon for course link -->
                            <!-- Add your custom SVG icon here if needed -->
                        </a>
                        <a href="{% url 'remove_from_wishlist' i.course.id %}" class="btn btn-xs btn-dark text-white rounded-circle lift opacity-dot-7 p-2 d-inline-flex justify-content-center align-items-center w-36 h-36">
                            <!-- Icon for removal -->
                            <!-- Add your custom SVG icon here if needed -->
                        </a>
                    </div>
                    <!-- Check if the course has a slug before generating the URL -->
                    {% if i.course.slug %}
                    <a href="{% url 'course_details' i.course.slug %}" class="card-img sk-thumbnail d-block">
                        <img class="rounded shadow-light-lg" src="{{i.course.featured_image.url}}" alt="...">
                    </a>
                    {% endif %}
                    <span class="badge sk-fade-bottom badge-lg badge-orange badge-pill badge-float bottom-0 left-0 mb-4 ms-4">
                        <span class="text-white text-uppercase fw-bold font-size-xs">Discount {{i.course.discount}}%</span>
                    </span>
                </div>

                <!-- Footer -->
                <div class="card-footer px-2 pb-2 mb-1 pt-4 position-relative">
                    <a href="" class="d-block">
                        <div class="avatar sk-fade-right avatar-xl badge-float position-absolute top-0 right-0 mt-n6 me-5 rounded-circle shadow border border-white border-w-lg">
                            <img src="{{i.course.instructor.profile_image.url}}" alt="Instructor Image" class="avatar-img rounded-circle">
                        </div>
                    </a>

                    <!-- Category -->
                    <a href="#"><span class="mb-1 d-inline-block text-gray-800">{{i.course.category}}</span></a>

                    <!-- Course Title -->
                    <div class="position-relative">
                        <a href="{% url 'course_details' i.course.slug %}" class="d-block stretched-link">
                            <h4 class="line-clamp-2 h-md-48 h-lg-58 me-md-6 me-lg-10 me-xl-4 mb-2">{{i.course.title}}</h4>
                        </a>

                        <div class="d-lg-flex align-items-end flex-wrap mb-n1">
                            <div class="star-rating mb-2 mb-lg-0 me-lg-3">
                                <div class="rating" style="width:50%;"></div>
                            </div>
                            <div class="font-size-sm">
                                <span>5.45 (5.8k+ reviews)</span>
                            </div>
                        </div>

                        <!-- Pricing -->
                        <div class="row mx-n2 align-items-end">
                            <div class="col px-2">
                                <ul class="nav mx-n3">
                                    <li class="nav-item px-3">
                                        <div class="d-flex align-items-center">
                                            <div class="font-size-sm"><a href="{% url 'remove_from_wishlist' i.course.id %}">Remove</a></div>
                                        </div>
                                    </li>
                                </ul>
                            </div>

                            <!-- Pricing (Free or Discounted) -->
                            {% if i.course.price == 0 %}
                            <div class="col-auto px-2 text-right">
                                <ins class="h4 mb-0 d-block mb-lg-n1"><span class="badge rounded-pill bg-primary">Free</span></ins>
                            </div>
                            {% else %}
                            <div class="col-auto px-2 text-right">
                                <del class="font-size-sm">${{i.course.price}}</del>
                                <ins class="h4 mb-0 d-block mb-lg-n1">${% discount_calculation i.course.price i.course.discount %}</ins>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                    <a href="{% url 'remove_from_wishlist' i.course.id %}" class="btn btn-xs btn-dark text-white rounded-circle lift opacity-dot-7 p-2 d-inline-flex justify-content-center align-items-center w-36 h-36"></a>
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <p>Your wishlist is empty.</p>
        {% endif %}
    </div>
</div>



{% endblock content %}